# Story 4.23: Reports & Analytics - Local Events Correlation (Manali Festivals)

## Status
Ready for Review

## Story
As a business owner,
I want to correlate local festivals/events with expenses and occupancy,
So that I can plan staffing, supplies, and budgets during high-impact periods.

## Acceptance Criteria
1. Event Data
   - Event model: title, date range, type (festival/holiday/local), expected impact
   - Import ICS/CSV; manual create/edit/delete
   - Tag by property or global
2. Visualizations
   - Event markers/bands over time-series charts
   - Event filter: show only event periods
   - Compare event vs non-event periods
3. Insights
   - Impact metrics (variance vs baseline)
   - Export includes event annotations

## Tasks / Subtasks
- [ ] EventService and storage schema
  - [ ] CRUD APIs for events
  - [ ] ICS/CSV import utility
- [ ] Hooks & UI
  - [ ] `useEvents({ start, end, propertyId })`
  - [ ] Admin UI: `EventsManager` (create/import)
  - [ ] `EventMarkers` overlay on charts
- [ ] Correlation & Reporting
  - [ ] Variance calculators; baseline selection
  - [ ] Export with event footnotes

## Dev Notes
- References: improvement plan (Comparison, Advanced Charts)
- Suggested locations:
  - `src/services/EventService.ts`
  - `src/hooks/useEvents.ts`
  - `src/components/ReportsAnalytics/admin/EventsManager.tsx`
  - `src/components/ReportsAnalytics/overlays/EventMarkers.tsx`
- Manali context examples: Winter Carnival, Dussehra, Hadimba Devi Festival, school holidays
- Foundation: Story 4.0 provides base architecture
- Location: New ReportsAnalytics section (not ExpenseManagement)
- No legacy code dependencies

## Testing
- [ ] Import flows (ICS/CSV) and manual CRUD
- [ ] Overlays render; accessible tooltips
- [ ] Impact calculations vs baseline accurate
- [ ] Dark mode/print styles maintain legibility

## Success Metrics
- Event annotations used in >25% exports
- Forecast accuracy improves during event periods

## Integration Points
- Comparison tools (Story 4.10)
- Predictive features (Story 4.11)
- Scheduled reports (Story 4.14) include event context

## Prerequisites
- Story 4.0 (Reports & Analytics Foundation) must be completed

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-08-16 | 1.0 | Initial story creation | Team |
