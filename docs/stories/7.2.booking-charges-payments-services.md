# Status
Planned

# Story: Booking Charges & Payments â€” Services
Create Supabase client services for CRUD on charges and payments.

## Prerequisites
- Schema and RLS in place (`7.1`).
- Dual Supabase client pattern as in existing services.

## Acceptance Criteria
- `src/services/bookingChargesService.ts` with functions: listByBooking, createFoodCharge, createMiscCharge, update, void.
- `src/services/bookingPaymentsService.ts` with functions: listByBooking, addPayment, addRefund, void.
- All calls are property-scoped and respect RLS.
- Basic unit tests or test harness to validate service behaviors.

## Tasks
- Implement `bookingChargesService.ts` and `bookingPaymentsService.ts` modeled on `menuService.ts` style.
- Add validation for input (qty > 0, prices >= 0).
- Ensure discount handling: percent/amount optional and applied in effective totals.
- Add small utility to compute effective per-line total if needed by UI.

## Dev Notes
- Use `src/lib/supabaseClient.ts` (or unified client guide) for client instantiation.
- Consider pagination for large lists, though UI likely per-booking small sets.

## Testing
- Insert/list/update/void flows under real RLS.
- Negative cases: cross-property access should fail.

## Change Log
- 2025-08-22: Story drafted.
