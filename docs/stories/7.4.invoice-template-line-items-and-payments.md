# Status
Planned

# Story: Invoice Template â€” Line Items and Payments
Update `src/components/InvoiceTemplate.tsx` to render detailed charges and payments/refunds with a clear summary.

## Prerequisites
- Schema/view available (`7.1`). Services available (`7.2`).

## Acceptance Criteria
- Invoice shows each charge line (type, description, qty, unit, line total). Discount lines appear as separate rows (`charge_type = 'discount'`) with negative styling.
- Invoice shows each payment and refund line (date, mode, amount).
- Summary section shows charges, discounts, taxes, gross, payments, refunds, balance due, and reconciles with aggregates in `public.booking_financials`.
- Existing folio/invoice numbering remains unchanged.
- Print-friendly formatting preserved.

## Tasks
- Fetch charges and payments for the booking.
- Do not compute per-line discounts. Treat `discount` rows as negative lines and compute net totals as the sum of all non-voided rows; authoritative totals are from `booking_financials`.
- Update layout to include the new sections with totals.
- Ensure print CSS remains clean.

## Dev Notes
- Keep visual hierarchy simple; avoid overwhelming with dense data.
- No per-line discount fields exist in the schema; discounts are separate rows (`charge_type = 'discount'`).

## Testing
- Visual verification with varied data (multiple food lines, discounts, refunds).
- Totals match values in `booking_financials` view.

## Change Log
- 2025-08-22: Story drafted.
